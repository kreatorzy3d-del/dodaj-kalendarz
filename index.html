<!DOCTYPE html>
<html>
<head>
    <title>Dodaj mÃ³j kalendarz</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js"></script>

    <style>

        /* ZMNIEJSZENIE OPISU â€“ WYMUSZONE */
        .desc {
            font-size: 13px !important;
            line-height: 1.4 !important;
        }

        
    .top-bar {
        display: flex;
        align-items: center;
        gap: 20px;           /* odstÄ™p miÄ™dzy tekstem a przyciskiem */
        padding: 20px 0;
    }

    .top-bar h1 {
        margin: 0;
        font-size: 28px;     /* zmniejsz, jeÅ›li chcesz Å‚adniejszy wyglÄ…d */
    }

    #authorize_button {
        font-size: 20px;      /* wiÄ™ksza czcionka */
        padding: 30px 60px;   /* wiÄ™kszy przycisk */
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }

    #authorize_button:hover {
        background-color: #0056b3;
    }

        .arrow {
    font-size: 32px;
    font-weight: bold;
    color: #007bff;   /* kolor dopasowany do przycisku */
    margin-top: 5px;
}
</style>



</head>
<body>

    </section>
<div class="top-bar">
    <h1>Dodaj MÃ³j Kalendarz PowiadomieÅ„</h1>

    <!-- STRZAÅKA -->
    <span class="arrow">âœ</span>

    <button id="authorize_button">Dodaj kalendarz</button>
</div>

<p style="margin-top:20px;">
  <a href="privacy.html">Polityka prywatnoÅ›ci</a>
</p>
<p><strong>TwÃ³rca:</strong> Kreatorzy3D</p> 
<p>
  <strong>Kontakt:</strong> kreatorzy3d@gmail.com
</p>
    
    <h1>Dodaj Kalendarz</h1>
    <h2 style="font-size: 20px; margin-top: 20px;">Czym jest ta aplikacja?</h2>
    <p class="desc">
        Ta aplikacja umoÅ¼liwia szybkie dodanie naszego kalendarza do Twojego konta Google. 
        DziÄ™ki temu moÅ¼esz wygodnie przeglÄ…daÄ‡ terminy, wydarzenia i aktualizacje przekazywane przez usÅ‚ugodawcÄ™.
    </p>

    <h2 style="font-size: 20px; margin-top: 20px;">Co ta aplikacja robi?</h2>
    <p class="desc">
        Po klikniÄ™ciu przycisku â€Dodaj kalendarzâ€ zostaniesz poproszony o zalogowanie siÄ™ na swoje 
        konto Google oraz udzielenie dostÄ™pu do Twojego Kalendarza Google. Aplikacja automatycznie 
        doda nasz kalendarz do Twojej listy kalendarzy, abyÅ› mÃ³gÅ‚ go wygodnie wyÅ›wietlaÄ‡ w aplikacji Google Calendar.
        Aplikacja nie modyfikuje Twoich prywatnych kalendarzy ani nie pobiera Å¼adnych dodatkowych danych.
    </p>

    <h2 style="font-size: 20px; margin-top: 20px;">Dlaczego aplikacja prosi o dostÄ™p do Kalendarza Google?</h2>
    <p class="desc">
        DostÄ™p jest potrzebny wyÅ‚Ä…cznie po to, aby dodaÄ‡ nasz kalendarz do Twojego konta Google. 
        DziÄ™ki temu bÄ™dziesz mÃ³gÅ‚ przeglÄ…daÄ‡ wydarzenia i aktualizacje udostÄ™pniane przez usÅ‚ugodawcÄ™. 
        Aplikacja nie zapisuje ani nie przechowuje Å¼adnych danych o uÅ¼ytkownikach. 
        W kaÅ¼dej chwili moÅ¼esz usunÄ…Ä‡ kalendarz ze swojego konta.
    </p>

<script>
    const CLIENT_ID = "306142273186-pulgqg887a0oplv02o54e0d4j0si062d.apps.googleusercontent.com";
    const API_KEY = "";
    const SCOPES = "https://www.googleapis.com/auth/calendar";

    let tokenClient;
    let gapiInited = false;
    let gisInited = false;

    function gapiLoaded() {
        gapi.load("client", initializeGapiClient);
    }

    async function initializeGapiClient() {
        await gapi.client.init({
            apiKey: API_KEY,
            discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],
        });
        gapiInited = true;
    }

    function gisLoaded() {
        tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: CLIENT_ID,
            scope: SCOPES,
            callback: handleAuth,
        });
        gisInited = true;
    }

    document.getElementById("authorize_button").onclick = () => {
        if (!gapiInited || !gisInited) return;
        tokenClient.requestAccessToken();
    };

    async function handleAuth() {
         // Pobierz parametr z linku ?cal=XX
    const urlParams = new URLSearchParams(window.location.search);
    const calParam = urlParams.get("cal");

    // Lista wszystkich kalendarzy (dodasz tu tyle, ile potrzebujesz)
    const CALENDARS = {
        "A": "ce4cebe9ac636039f430d902b645559d5ae574e7a777b9935264010155775901@group.calendar.google.com",
        "B": "72c5cc8df4028c9b6b1a02bf481939f73129494bff527d82266c7eb05d02f670@group.calendar.google.com"
    };

    // Wybierz kalendarz po parametrze
    const calendarId = CALENDARS[calParam];

    // JeÅ›li nie istnieje â€” zÅ‚e wejÅ›cie
    if (!calendarId) {
        alert("NieprawidÅ‚owy link â€” kalendarz nie istnieje.");
        return;
    }

    // Dodaj kalendarz
    try {
        await gapi.client.calendar.calendarList.insert({
            resource: { id: calendarId }
        });

        // ğŸ”µ TU WÅAÅšNIE JEST KOMUNIKAT O POPRAWNYM DODANIU
        alert("Kalendarz zostaÅ‚ poprawnie dodany do Twojego konta Google!");

    } catch (err) {
        alert("BÅ‚Ä…d podczas dodawania kalendarza: " + err.message);
    }
    }
</script>

<script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
<script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>

</body>
</html>























